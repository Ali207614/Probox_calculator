<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Калькулятор рассрочки</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Geologica:wght@400;600;800&display=swap");

      body {
        background-color: #f9f9f9;
        font-family: "Geologica", Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }
      .card {
        background-color: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        width: 320px;
        border-top: 8px solid #ff333f;
        text-align: center;
      }
      .logo {
        width: 60px;
        margin: 0 auto 20px;
      }
      .lang {
        text-align: right;
        margin-bottom: 10px;
      }
      .field {
        margin-bottom: 15px;
        text-align: left;
      }
      .field label {
        display: block;
        margin-bottom: 6px;
        font-weight: 600;
        color: #303030;
      }
      .field input,
      .field select {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #ccc;
        border-radius: 6px;
      }
      .result {
        font-size: 16px;
        font-weight: bold;
        margin-top: 20px;
        color: #ff333f;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <div class="lang">
        <select id="langSelect">
          <option value="ru">Русский</option>
          <option value="uz">O‘zbekcha</option>
        </select>
      </div>
      <div>
        <svg
          version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          width="100"
          height="100"
          viewBox="0 0 640.000000 640.000000"
          preserveAspectRatio="xMidYMid meet">
          <g
            transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)"
            fill="#000000"
            stroke="none">
            <path
              d="M2579 5326 c-2 -3 -16 -7 -30 -9 -89 -16 -119 -44 -771 -695 -602
-602 -639 -641 -670 -707 l-33 -70 -3 -597 c-3 -578 -2 -599 17 -636 26 -50
81 -98 128 -112 26 -8 208 -10 584 -8 l545 3 42 28 c23 15 54 46 69 69 l28 42
5 560 5 561 28 47 c18 31 44 57 75 75 l47 28 561 5 560 5 42 28 c23 15 54 46
69 69 l28 42 3 545 c2 377 0 558 -8 584 -14 49 -65 106 -115 128 -37 17 -81
19 -621 19 -319 0 -583 -2 -585 -4z" />
            <path
              d="M4025 3882 c-34 -18 -59 -42 -80 -76 l-30 -49 -5 -556 c-5 -518 -6
-559 -24 -594 -23 -47 -75 -91 -125 -106 -27 -8 -200 -11 -567 -11 -510 0
-531 -1 -574 -21 -59 -26 -77 -44 -106 -102 l-24 -47 2 -553 3 -553 27 -41
c15 -23 44 -54 64 -70 l37 -28 616 0 616 0 65 33 c57 30 142 111 706 675 562
562 645 649 670 702 l29 60 3 602 c2 580 2 604 -17 640 -25 49 -66 88 -113
107 -32 14 -112 16 -580 16 l-543 0 -50 -28z" />
          </g>
        </svg>
      </div>
      <div class="field">
        <label id="labelRate">Курс доллара (1 USD = ? сум)</label>
        <input type="number" id="usdRate" placeholder="12500" />
      </div>
      <div class="field">
        <label id="labelPrice">Цена товара (в $)</label>
        <input type="number" id="price" placeholder="$" />
      </div>
      <div class="field">
        <label id="labelDown">Первоначальный взнос (в $)</label>
        <input type="number" id="downpayment" placeholder="$" />
      </div>
      <div class="field">
        <label id="labelMonths">Срок (мес.)</label>
        <select id="months">
          <option value="">Выберите / Tanlang</option>
        </select>
      </div>
      <div class="result" id="payment">Ежемесячный платёж: —</div>
    </div>

    <script>
      const markupTable = {
        1: 5,
        2: 10,
        3: 17,
        4: 25,
        5: 35,
        6: 38,
        7: 43,
        8: 47,
        9: 50,
        10: 55,
        11: 58,
        12: 63,
        13: 65,
        14: 68,
        15: 70,
        16: 73,
        17: 77,
        18: 80,
        19: 83,
        20: 85,
      };

      const langText = {
        ru: {
          rate: "Курс доллара (1 USD = ? сум)",
          price: "Цена товара (в $)",
          down: "Первоначальный взнос (в $)",
          months: "Срок (мес.)",
          result: "Ежемесячный платёж: ",
        },
        uz: {
          rate: "1 USD kursi (so'm)",
          price: "Mahsulot narxi ($)",
          down: "Boshlang'ich to'lov ($)",
          months: "Muddat (oy)",
          result: "Oylik to‘lov: ",
        },
      };

      const langSelect = document.getElementById("langSelect");
      const usdRateInput = document.getElementById("usdRate");
      const priceInput = document.getElementById("price");
      const downInput = document.getElementById("downpayment");
      const monthsSelect = document.getElementById("months");
      const result = document.getElementById("payment");

      for (let i = 1; i <= 20; i++) {
        const opt = document.createElement("option");
        opt.value = i;
        opt.text = i;
        monthsSelect.appendChild(opt);
      }

      function updateLanguage() {
        const lang = langSelect.value;
        document.getElementById("labelRate").innerText = langText[lang].rate;
        document.getElementById("labelPrice").innerText = langText[lang].price;
        document.getElementById("labelDown").innerText = langText[lang].down;
        document.getElementById("labelMonths").innerText =
          langText[lang].months;
        calculate();
      }

      function calculate() {
        const rate = parseFloat(usdRateInput.value);
        const price = parseFloat(priceInput.value);
        const down = parseFloat(downInput.value);
        const months = parseInt(monthsSelect.value);
        const lang = langSelect.value;

        if (!rate || !price || !down || !months || !markupTable[months]) {
          result.innerText = langText[lang].result + "—";
          return;
        }

        const markup = markupTable[months];
        const amountUSD = price - down;
        const totalUSD = amountUSD * (1 + markup / 100);
        const monthlyUSD = totalUSD / months;
        const monthlySUM = monthlyUSD * rate;

        result.innerText = `${langText[lang].result} $${monthlyUSD.toFixed(
          2
        )} / ${Math.round(monthlySUM)} сум`;
      }

      langSelect.addEventListener("change", updateLanguage);
      usdRateInput.addEventListener("input", calculate);
      priceInput.addEventListener("input", calculate);
      downInput.addEventListener("input", calculate);
      monthsSelect.addEventListener("change", calculate);

      updateLanguage();
    </script>
  </body>
</html>
